#!/usr/bin/env bash

#
# ENVIRONMENT STATUS
#

# Is the shell a sh environment
[ "$0" == "sh" ] \
	&& SHELL_SH=true \
	|| SHELL_SH=false

# Is the shell interactive
[ ! -z "`echo $- | grep i`" ] \
	&& SHELL_INTERACTIVE=true \
	|| SHELL_INTERACTIVE=false

# Is the shell a login shell
[ ! -z "`shopt login_shell`" ] \
	&& SHELL_LOGIN=true \
	|| SHELL_LOGIN=false

# Is the shell a ssh environment
[ ! -z "`pstree -ps $$ | grep sshd`" ] \
	&& SSH=true \
	|| SSH=false

# Is the shell a ssh environment on the uvcluster
# TODO: ping can lag terminal
# [ ! -z "`ping -c 1 uvcluster 2>/dev/null`" ] \
	# && UVCLUSTER=true \
	# || UVCLUSTER=false
UVCLUSTER=false

export SHELL_SH SHELL_INTERACTIVE SHELL_LOGIN SSH UVCLUSTER

#
# COLORS
#

function set_colors() {
	# Colors
	declare -A colors=([black]=30
						[red]=31
						[green]=32
						[yellow]=33
						[blue]=34
						[magenta]=35
						[cyan]=36
						[white]=37
	)
	local pre='\033['
	export RESET="${pre}m"
	export UNDERLINE="${pre}4m"
	export CROSSEDOUT="${pre}9m"

	for key in "${!colors[@]}"; do
		eval "export ${key^^}=\"${pre}${colors[$key]}m\""
		eval "export B${key^^}=\"${pre}1;${colors[$key]}m\""
		eval "export F${key^^}=\"${pre}2;${colors[$key]}m\""
		eval "export I${key^^}=\"${pre}3;${colors[$key]}m\""
	done
}

set_colors

#
# Dotfiles exports
#

export DOTFILES="$HOME/.config/config"
